## DCPU Profiler

**Note**: This is work in progress. I hope to expand the amount of data about
a program one can query along with ways to make it more useful.

This is an interactive commandline tool that can analyze profiling data
generated by the `prof` package.

It accepts a number of textual commands which serve to display various
types of data in table form. Options to these commands allow us to
sort the data in different ways and to filter out unnecessary clutter.

### Usage

Read the given file:

    $ dcpu-prof data.prof

Run the program with the `-h` flag for a listing of all options.


### Example

Here is an excerpt of an example usage of the `top` command.
It lists only the usage of functions. This is a good starting point
when profiling code. As it gives a rough overview of where most of the CPU
time is spent without going into too much detail.

	$ dcpu-prof testdata/test.prof 
	dcpu-prof 0.3.1342111457 (Go runtime go1.0.2).
	Copyright (c) 2010-2012, Jim Teeuwen.
	Press 'q' to exit or 'help' for help.
	
	> top
	10 sample(s), 29 cycle(s)
		    4  40.00%       10  34.48% assert_eq            assert_eq.dasm:8
		    4  40.00%       14  48.28% memchr               memchr.dasm:15
		    2  20.00%        5  17.24% assert_ez            assert_ez.dasm:8

	> top 3 cost
	10 sample(s), 29 cycle(s)
		    4  40.00%       14  48.28% memchr               memchr.dasm:15
		    4  40.00%       10  34.48% assert_eq            assert_eq.dasm:8
		    2  20.00%        5  17.24% assert_ez            assert_ez.dasm:8


The table shows 6 columns:

* **COUNT**: This is the cumulative total number of times each instruction
  inside this function was executed.

* **COUNT PERC**: This is the percentage of the total count for all
  returned samples.
  
* **COST**: This is the cumulative cycle cost for all instructions inside
  this function.
  
* **COST PERC**: This is the cost percentage of the total cost for the
  returned samples.
  
* **NAME**: This is the name of the function, denoted by the label that
  directly preceeded its definition.
  
* **FILE**: This shows the original source file and line in which the
  function is defined.


### Dependencies

* github.com/jteeuwen/dcpu/cpu
* github.com/jteeuwen/dcpu/prof
* github.com/jteeuwen/dcpu/parser


### License

DCPU, 0x10c and related materials are Copyright 2012 Mojang.

Unless otherwise stated, all of the work in this project is subject to a
1-clause BSD license. Its contents can be found in the enclosed LICENSE file.
